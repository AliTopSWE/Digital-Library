<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Panel - Digital Library</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <!-- Ø´Ø±ÙŠØ· Ø¹Ù„ÙˆÙŠ -->
    <div class="navbar">
        <span class="menu-icon" onclick="toggleMenu()">â˜°</span>
        <h2>âš™ï¸ Admin Panel</h2>
    </div>

    <!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© -->
    <div id="sideMenu" class="side-menu">
        <a href="javascript:void(0)" class="closebtn" onclick="toggleMenu()">âœ–</a>
        <a href="/index">ğŸ  Home</a>
        <a href="/history">ğŸ“œ Download History</a>
        <a href="/profile">ğŸ‘¤ Profile</a>
        <!-- Ø±Ø§Ø¨Ø· Add Book ÙŠØ¸Ù‡Ø± ÙÙ‚Ø· Ù„Ù„Ø£Ø¯Ù…Ù† -->
        <a id="adminLink" href="/admin" style="display:none;">â• Add Book</a>
        <a href="/api/logout">ğŸšª Logout</a>
    </div>

    <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØµÙØ­Ø© -->
    <div class="admin-box">
        <h3>Add New Book</h3>
        <form id="addBookForm" enctype="multipart/form-data">
            <input type="text" name="title" placeholder="Book Title" required>
            <input type="text" name="author" placeholder="Author" required>

            <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª -->
            <select name="category_id" id="categorySelect" required></select>

            <input type="file" name="file" required>
            <input type="file" name="cover" required>
            <button type="submit">Add Book</button>
        </form>
        <p id="result"></p>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
    <script>
        async function loadCategories() {
            let res = await fetch("/api/categories");
            let cats = await res.json();
            let select = document.getElementById("categorySelect");
            select.innerHTML = "";
            cats.forEach(c => {
                select.innerHTML += `<option value="${c.id}">${c.name}</option>`;
            });
        }
        loadCategories();
    </script>
</body>
</html>